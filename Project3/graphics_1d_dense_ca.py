from p5 import *
from dense_1d_ca import CaOneDDense
import ca_inputs

def setup():
    size(CaOneDDense._input_len*4,CaOneDDense._iter_size*4)
    no_stroke()



def draw():
    # print(CaOneDDense._init_cond_len)
    for i in range(0,CaOneDDense._input_len):
        if ca.input[i]=='0':
            fill(0)
        else:
            fill(255)
        square((i*4,ca.current_iter*4),4)

    ca.iterate_once()
    if ca.current_iter >= ca._iter_size:
        no_loop()

testrule = {'fitness': 196, 0: '0', 1: '0', 2: '0', 3: '0', 4: '1', 5: '0', 6: '0', 7: '1', 8: '1', 9: '1', 10: '1', 11: '1', 12: '1', 13: '0', 14: '0', 15: '1', 16: '0', 17: '0', 18: '0', 19: '0', 20: '0', 21: '1', 22: '1', 23: '1', 24: '1', 25: '1', 26: '0', 27: '0', 28: '0', 29: '1', 30: '1', 31: '1', 32: '0', 33: '0', 34: '1', 35: '1', 36: '1', 37: '1', 38: '1', 39: '1', 40: '1', 41: '1', 42: '1', 43: '1', 44: '1', 45: '0', 46: '0', 47: '0', 48: '1', 49: '0', 50: '1', 51: '0', 52: '0', 53: '0', 54: '1', 55: '1', 56: '1', 57: '1', 58: '0', 59: '1', 60: '0', 61: '1', 62: '1', 63: '1', 64: '0', 65: '1', 66: '1', 67: '1', 68: '1', 69: '0', 70: '1', 71: '1', 72: '0', 73: '0', 74: '0', 75: '1', 76: '1', 77: '1', 78: '0', 79: '1', 80: '0', 81: '0', 82: '1', 83: '0', 84: '1', 85: '0', 86: '1', 87: '0', 88: '1', 89: '1', 90: '0', 91: '1', 92: '0', 93: '0', 94: '0', 95: '1', 96: '0', 97: '1', 98: '1', 99: '1', 100: '0', 101: '0', 102: '1', 103: '1', 104: '0', 105: '1', 106: '1', 107: '1', 108: '1', 109: '1', 110: '0', 111: '1', 112: '0', 113: '1', 114: '1', 115: '1', 116: '1', 117: '0', 118: '1', 119: '1', 120: '0', 121: '1', 122: '0', 123: '1', 124: '0', 125: '1', 126: '1', 127: '1'}


ca = CaOneDDense(rules= testrule, input=ca_inputs.dense_0_50[49])
# ca.iterate_all()
run()
